<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE tiles-definitions PUBLIC "-//Apache Software Foundation//DTD Tiles Configuration 3.0//EN" "http://tiles.apache.org/dtds/tiles-config_З_O.dtd">
<tiles-definitions>
 
    <!-- Части страниц зависящие от действий пользователя -->
    <definition name="page.body.header.auth.icon" template="/WEB-INF/tile/page-body-header-auth-icon.jspx"></definition>
    <definition name="page.body.header.auth" template="/WEB-INF/tile/page-body-header-auth.jspx"></definition>
   
    <!-- Шаблоны -->
    <definition name="simple" template="/WEB-INF/tile/page.jspx"></definition>
        
    <definition name="main" template="/WEB-INF/tile/page.jspx">
        <put-attribute name="page.head.js.main" value="/js/rhhcc/main.js"/>
        <put-attribute name="page.body">
            <definition template="/WEB-INF/tile/page-body.jspx">
                <put-attribute name="page.body.header" value="/WEB-INF/tile/page-body-header.jspx"/>
                <put-attribute name="page.body.header.auth.icon" value="page.body.header.auth.icon" cascade="true"/>
                <put-attribute name="page.body.header.auth" value="page.body.header.auth" cascade="true"/>
                <put-attribute name="page.body.footer" value="/WEB-INF/tile/page-body-footer.jspx"/>
            </definition>
        </put-attribute>        
    </definition>
        
    <!-- Страницы -->     
    <!-- Тестовая страница -->
    <definition extends="simple" name="test.test">
        <put-attribute name="page.head.title" value="RHHCC | Тест"/>
        <put-attribute name="page.head.js.main" value="/js/rhhcc/main.js"/>
        <put-attribute name="page.body" value="/WEB-INF/view/test/test.jspx"/>
    </definition>
    
    <!-- Страница обрабатывающая ответ от сервера предоставляющего внешнюю аутентификацию в случае успешной аутентификации -->
    <definition extends="simple" name="user.auth.success">
        <put-attribute name="page.head.js.main" value="/js/rhhcc/user/auth/success.js"/>
        <put-attribute name="page.body" value="/WEB-INF/view/user/auth/success.jspx"/>
    </definition>
    
    <!-- Страница обрабатывающая ответ от сервера предоставляющего внешнюю аутентификацию в случае отказа в аутентификации -->
    <definition extends="simple" name="user.auth.failure">
        <put-attribute name="page.head.js.main" value="/js/rhhcc/user/auth/failure.js"/>
        <put-attribute name="page.body" value="/WEB-INF/view/user/auth/failure.jspx"/>
    </definition> 
    
    <!-- Главная страница -->   
    <definition name="page.body.content.index" template="/WEB-INF/view/index.jspx"></definition>
    <definition extends="main" name="index">
        <put-attribute name="page.head.title" value="RHHCC | Главная"/>
        <put-attribute name="page.body.header.style" value="tall" cascade="true"/>
        <put-attribute name="page.body.content" value="page.body.content.index" cascade="true"/>
    </definition>
    
    <!-- Универсальная страница успешной обработки запроса пользователя -->
    <definition name="page.body.content.complete" template="/WEB-INF/view/result.jspx"></definition>
    <definition extends="main" name="complete">
        <put-attribute name="page.head.title" value="RHHCC | Выполнено"/>
        <put-attribute name="page.body.content" value="page.body.content.complete" cascade="true"/>
    </definition>
    
    <!-- Универсальная страница ошибки во время обработки запроса пользователя -->
    <definition name="page.body.content.failure" template="/WEB-INF/view/result.jspx"></definition>
    <definition extends="main" name="failure">
        <put-attribute name="page.head.title" value="RHHCC | Ошибка во время выполнения"/>
        <put-attribute name="page.body.content" value="page.body.content.failure" cascade="true"/>
    </definition>
    
    <!-- Регистрация нового пользователя -->
    <definition name="page.body.content.user.register" template="/WEB-INF/view/user/register.jspx"></definition>
    <definition extends="main" name="user.register">
        <put-attribute name="page.head.title" value="RHHCC | Регистрация"/>
        <put-attribute name="page.body.content" value="page.body.content.user.register" cascade="true"/>
    </definition>
    
    <!-- Редактирование профиля пользователя -->
    <definition name="page.body.content.user.update" template="/WEB-INF/view/user/update.jspx"></definition>
    <definition extends="main" name="user.update">
        <put-attribute name="page.head.title" value="RHHCC | Редактирование профиля"/>
        <put-attribute name="page.body.content" value="page.body.content.user.update" cascade="true"/>
    </definition>
    
</tiles-definitions>
